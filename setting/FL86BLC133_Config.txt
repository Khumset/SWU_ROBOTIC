dev0.erase_configuration()
dev0.config.dc_bus_

dev0.axis0.motor.config.pole_pairs = 4
dev0.axis0.motor.config.calibration_current = 5
dev0.axis0.motor.config.resistance_calib_max_voltage= 4
dev0.axis0.motor.config.motor_type =MOTOR_TYPE_HIGH_CURRENT
dev0.axis0.motor.config.torque_constant = 0.137 *12
dev0.axis0.motor.config.current_lim = 57
dev0.axis0.motor.config.requested_current_range = 60
dev0.save_configuration()

dev0.axis0.encoder.config.mode=ENCODER_MODE_INCREMENTAL
dev0.axis0.encoder.config.cpr= 10000
dev0.axis0.encoder.config.bandwidth = 3000
dev0.axis0.config.calibration_lockin.current=5
dev0.axis0.config.calibration_lockin.ramp_time=0.4
dev0.axis0.config.calibration_lockin.ramp_distance=3.1415927410125732
dev0.axis0.config.calibration_lockin.accel=20
dev0.axis0.config.calibration_lockin.vel=40

dev0.axis0.controller.config.control_mode = CONTROL_MODE_POSITION_CONTROL
dev0.axis0.trap_traj.config.vel_limit=30
dev0.axis0.controller.config.pos_gain = 30
dev0.axis0.controller.config.vel_gain = 0.02
dev0.axis0.controller.config.vel_integrator_gain = 0.2
dev0.axis0.controller.config.input_mode=INPUT_MODE_TRAP_TRAJ
dev0.axis0.trap_traj.config.accel_limit=5
dev0.axis0.trap_traj.config.decel_limit=5
dev0.save_configuration()
dev0.reboot()

dev0.axis0.trap_traj.config.vel_limit
dev0.axis0.trap_traj.config.accel_limit
dev0.axis0.trap_traj.config.decel_limit
dev0.axis0.controller.config.inertia

dev0.axis0.requested_state = AXIS_STATE_MOTOR_CALIBRATION
dev0.axis0.motor.config.pre_calibrated = True
dev0.axis0.requested_state = AXIS_STATE_ENCODER_OFFSET_CALIBRATION
dev0.axis0.requested_state = AXIS_STATE_CLOSED_LOOP_CONTROL
dev0.axis0.config.startup_encoder_offset_calibration= True
dev0.axis0.config.startup_closed_loop_control = True
dev0.save_configuration()
dev0.axis0.controller.input_pos=10


MODE VELOCITY CONTROL

dev0.axis0.controller.config.control_mode = CONTROL_MODE_VELOCITY_CONTROL
dev0.axis0.controller.config.vel_limit = 50
dev0.axis0.controller.config.pos_gain = 30
dev0.axis0.controller.config.vel_gain = 0.02
dev0.axis0.controller.config.vel_integrator_gain = 0.2
dev0.axis0.controller.config.input_mode = INPUT_MODE_VEL_RAMP
dev0.axis0.controller.config.vel_ramp_rate = 5.5
dev0.save_configuration()

dev0.axis0.requested_state = AXIS_STATE_MOTOR_CALIBRATION  
dev0.axis0.encoder.config.use_index = True
dev0.axis0.requested_state = AXIS_STATE_ENCODER_INDEX_SEARCH
dev0.axis0.requested_state = AXIS_STATE_ENCODER_OFFSET_CALIBRATION
dev0.axis0.encoder.shadow_count
dev0.axis0.encoder.config.pre_calibrated = True
dev0.axis0.config.startup_encoder_index_search  = True
dev0.axis0.motor.config.pre_calibrated = True
dev0.save_configuration()

dev0.axis0.requested_state = AXIS_STATE_CLOSED_LOOP_CONTROL
dev0.axis0.controller.input_vel = 0
dev0.axis0.controller.input_vel = 2
dev0.axis0.requested_state = AXIS_STATE_IDLE

start_liveplotter(lambda:[dev0.axis0.encoder.vel_estimate, dev0.axis0.controller.input_vel])


dev0.axis0.controller.config.pos_gain = 32.7
dev0.axis0.controller.config.vel_gain = 0.77
dev0.axis0.controller.config.vel_integrator_gain = 24.532

dev0.axis0.controller.config.pos_gain = 50
dev0.axis0.controller.config.vel_gain = 20
dev0.axis0.controller.config.vel_integrator_gain = 45

dev0.axis0.controller.config.pos_gain = dev0.axis0.controller.config.pos_gain * 0.5
dev0.axis0.controller.config.vel_gain = dev0.axis0.controller.config.vel_integrator_gain * 0.05
dev0.axis0.controller.config.vel_integrator_gain = dev0.axis0.controller.config.vel_integrator_gain * 0.5
 


dev0.axis0.requested_state = AXIS_STATE_CLOSED_LOOP_CONTROL
dev1.axis0.requested_state = AXIS_STATE_CLOSED_LOOP_CONTROL
dev0.axis0.controller.input_vel = 0
dev1.axis0.controller.input_vel = 0
dev0.axis0.controller.input_vel = 5
dev1.axis0.controller.input_vel = -5
dev0.axis0.requested_state = AXIS_STATE_IDLE
dev1.axis0.requested_state = AXIS_STATE_IDLE